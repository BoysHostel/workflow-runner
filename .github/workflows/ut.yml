name: Workflow Runner
on: 
    push:
        branches: [ "main" ]
    pull_request:
        branches: [ "main" ]
permissions: write-all
jobs:
    run-test-cases:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3
              with:
                    fetch-depth: 0
            - name: Set up Python 3.9
              uses: actions/setup-python@v3
              with:
                    python-version: '3.9'
            - name: UNIT TEST REPO
              uses: Nikson-A/unit-test-action@main
              env:
                    expect_coverage: 90
              with:
                  github_api_domain: "https://api.github.com"
                  github_repository: $GITHUB_ACTION_REPOSITORY
                  commit_id: ${{ github.event.pull_request.head.sha }}
                  expect_coverage: 90
                  test_action: "[{\"path\": \"workflow-runnner/workflow\", \"command\": \"nosetests --with-coverage --cover-erase --cover-package=. --cover-tests --cover-xml\", \"env\": \"\"}]"
